{"ast":null,"code":"var _jsxFileName = \"C:\\\\Development\\\\Personal\\\\React-IOC\\\\react-ioc\\\\src\\\\components\\\\ReactIOC\\\\ComponentLoader\\\\ComponentLoader.js\",\n    _s = $RefreshSig$();\n\nimport JsonPopulator from \"../../../utils/JsonPopulator\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { reactIocActionNames } from \"../../../redux/confiReducer/reactIOCActions\";\nimport { useEffect, useMemo } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction prepareComponent(populatedComponents, compName) {\n  const Component = populatedComponents[compName];\n\n  populatedComponents[compName] = (comp, parentId, suffixId) => {\n    parentId = parentId ? parentId + \"/\" : \"\";\n    suffixId = suffixId ? suffixId : \"\";\n    const key = parentId + comp.id + suffixId;\n    return /*#__PURE__*/_jsxDEV(Component, {\n      id: key,\n      ...comp.props\n    }, key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 14\n    }, this);\n  };\n}\n\nfunction prepareComponents(components) {\n  const populatedComponents = { ...components\n  };\n\n  for (const compName in populatedComponents) {\n    prepareComponent(populatedComponents, compName);\n  }\n\n  return populatedComponents;\n}\n\nfunction populatePageStructure(pageStructure, components, functions, resources) {\n  const populatedPageStructure = { ...pageStructure\n  };\n  const data = { ...components,\n    ...functions,\n    ...resources\n  };\n  const newState = new JsonPopulator(data).populatePageStructure(populatedPageStructure);\n  return [newState, populatedPageStructure];\n}\n\nfunction ComponentLoader(props) {\n  _s();\n\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n  const components = useMemo(() => prepareComponents(props.components), [props.components]);\n  const [newState, pageStructure] = useMemo(() => populatePageStructure(props.pageStructure, components, props.functions, props.resources), [props.pageStructure, components, props.functions, props.resources]);\n  useEffect(() => {\n    dispatch({\n      type: reactIocActionNames.populateState,\n      newState: newState\n    });\n  }, [dispatch, newState]);\n  if (state === null) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  return pageStructure.render(pageStructure);\n}\n\n_s(ComponentLoader, \"AyvohX9shfeaFcYo0UCX4hFsDbc=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = ComponentLoader;\nexport default ComponentLoader;\n\nvar _c;\n\n$RefreshReg$(_c, \"ComponentLoader\");","map":{"version":3,"names":["JsonPopulator","useDispatch","useSelector","reactIocActionNames","useEffect","useMemo","prepareComponent","populatedComponents","compName","Component","comp","parentId","suffixId","key","id","props","prepareComponents","components","populatePageStructure","pageStructure","functions","resources","populatedPageStructure","data","newState","ComponentLoader","state","dispatch","type","populateState","render"],"sources":["C:/Development/Personal/React-IOC/react-ioc/src/components/ReactIOC/ComponentLoader/ComponentLoader.js"],"sourcesContent":["import JsonPopulator from \"../../../utils/JsonPopulator\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { reactIocActionNames } from \"../../../redux/confiReducer/reactIOCActions\";\r\nimport { useEffect, useMemo } from \"react\";\r\n\r\nfunction prepareComponent(populatedComponents,compName){\r\n  const Component = populatedComponents[compName];\r\n    populatedComponents[compName] = (comp, parentId, suffixId) => {\r\n      parentId = parentId ? parentId + \"/\" : \"\";\r\n      suffixId = suffixId ? suffixId : \"\";\r\n      const key = parentId + comp.id + suffixId;\r\n      return <Component key={key} id={key} {...comp.props} />;\r\n    };\r\n}\r\n\r\nfunction prepareComponents(components) {\r\n  const populatedComponents = {...components};\r\n  for (const compName in populatedComponents) {\r\n    prepareComponent(populatedComponents,compName)\r\n  }\r\n  return populatedComponents;\r\n}\r\n\r\nfunction populatePageStructure(pageStructure,components,functions,resources) {\r\n  const populatedPageStructure = {...pageStructure};\r\n  const data = {...components,...functions,...resources};\r\n  const newState = new JsonPopulator(data).populatePageStructure(populatedPageStructure);\r\n  return [newState, populatedPageStructure];\r\n}\r\n\r\nfunction ComponentLoader(props) {\r\n  const state = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const components = useMemo(\r\n    () => prepareComponents(props.components),\r\n    [props.components]\r\n  );\r\n  const [newState, pageStructure] = useMemo(\r\n    () =>\r\n      populatePageStructure(\r\n        props.pageStructure,\r\n        components,\r\n        props.functions,\r\n        props.resources\r\n      ),\r\n    [props.pageStructure, components, props.functions, props.resources]\r\n  );\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: reactIocActionNames.populateState,\r\n      newState: newState,\r\n    });\r\n  }, [dispatch, newState]);\r\n  if (state === null) return <></>;\r\n  return pageStructure.render(pageStructure);\r\n}\r\n\r\nexport default ComponentLoader;\r\n"],"mappings":";;;AAAA,OAAOA,aAAP,MAA0B,8BAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,mBAAT,QAAoC,6CAApC;AACA,SAASC,SAAT,EAAoBC,OAApB,QAAmC,OAAnC;;;;AAEA,SAASC,gBAAT,CAA0BC,mBAA1B,EAA8CC,QAA9C,EAAuD;EACrD,MAAMC,SAAS,GAAGF,mBAAmB,CAACC,QAAD,CAArC;;EACED,mBAAmB,CAACC,QAAD,CAAnB,GAAgC,CAACE,IAAD,EAAOC,QAAP,EAAiBC,QAAjB,KAA8B;IAC5DD,QAAQ,GAAGA,QAAQ,GAAGA,QAAQ,GAAG,GAAd,GAAoB,EAAvC;IACAC,QAAQ,GAAGA,QAAQ,GAAGA,QAAH,GAAc,EAAjC;IACA,MAAMC,GAAG,GAAGF,QAAQ,GAAGD,IAAI,CAACI,EAAhB,GAAqBF,QAAjC;IACA,oBAAO,QAAC,SAAD;MAAqB,EAAE,EAAEC,GAAzB;MAAA,GAAkCH,IAAI,CAACK;IAAvC,GAAgBF,GAAhB;MAAA;MAAA;MAAA;IAAA,QAAP;EACD,CALD;AAMH;;AAED,SAASG,iBAAT,CAA2BC,UAA3B,EAAuC;EACrC,MAAMV,mBAAmB,GAAG,EAAC,GAAGU;EAAJ,CAA5B;;EACA,KAAK,MAAMT,QAAX,IAAuBD,mBAAvB,EAA4C;IAC1CD,gBAAgB,CAACC,mBAAD,EAAqBC,QAArB,CAAhB;EACD;;EACD,OAAOD,mBAAP;AACD;;AAED,SAASW,qBAAT,CAA+BC,aAA/B,EAA6CF,UAA7C,EAAwDG,SAAxD,EAAkEC,SAAlE,EAA6E;EAC3E,MAAMC,sBAAsB,GAAG,EAAC,GAAGH;EAAJ,CAA/B;EACA,MAAMI,IAAI,GAAG,EAAC,GAAGN,UAAJ;IAAe,GAAGG,SAAlB;IAA4B,GAAGC;EAA/B,CAAb;EACA,MAAMG,QAAQ,GAAG,IAAIxB,aAAJ,CAAkBuB,IAAlB,EAAwBL,qBAAxB,CAA8CI,sBAA9C,CAAjB;EACA,OAAO,CAACE,QAAD,EAAWF,sBAAX,CAAP;AACD;;AAED,SAASG,eAAT,CAAyBV,KAAzB,EAAgC;EAAA;;EAC9B,MAAMW,KAAK,GAAGxB,WAAW,CAAEwB,KAAD,IAAWA,KAAZ,CAAzB;EACA,MAAMC,QAAQ,GAAG1B,WAAW,EAA5B;EACA,MAAMgB,UAAU,GAAGZ,OAAO,CACxB,MAAMW,iBAAiB,CAACD,KAAK,CAACE,UAAP,CADC,EAExB,CAACF,KAAK,CAACE,UAAP,CAFwB,CAA1B;EAIA,MAAM,CAACO,QAAD,EAAWL,aAAX,IAA4Bd,OAAO,CACvC,MACEa,qBAAqB,CACnBH,KAAK,CAACI,aADa,EAEnBF,UAFmB,EAGnBF,KAAK,CAACK,SAHa,EAInBL,KAAK,CAACM,SAJa,CAFgB,EAQvC,CAACN,KAAK,CAACI,aAAP,EAAsBF,UAAtB,EAAkCF,KAAK,CAACK,SAAxC,EAAmDL,KAAK,CAACM,SAAzD,CARuC,CAAzC;EAUAjB,SAAS,CAAC,MAAM;IACduB,QAAQ,CAAC;MACPC,IAAI,EAAEzB,mBAAmB,CAAC0B,aADnB;MAEPL,QAAQ,EAAEA;IAFH,CAAD,CAAR;EAID,CALQ,EAKN,CAACG,QAAD,EAAWH,QAAX,CALM,CAAT;EAMA,IAAIE,KAAK,KAAK,IAAd,EAAoB,oBAAO,qCAAP;EACpB,OAAOP,aAAa,CAACW,MAAd,CAAqBX,aAArB,CAAP;AACD;;GAzBQM,e;UACOvB,W,EACGD,W;;;KAFVwB,e;AA2BT,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}