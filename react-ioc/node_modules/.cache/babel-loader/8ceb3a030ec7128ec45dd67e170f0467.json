{"ast":null,"code":"import ReactIOCException from './ReactIOCException';\nexport default class JsonPopulator {\n  constructor(data) {\n    this.data = data;\n    this.state = {};\n  }\n\n  populatePageStructure(json) {\n    this.populateComponent(json, state);\n  }\n\n  populateComponent(json, stateProp) {\n    if (!json.hasOwnProperty(\"render\")) throw new ReactIOCException(\"Missing 'render' attribute!\", \"'render' attribute is missing in json.\");\n    this.populateProp(json, \"render\");\n    if (json.requireRedux) stateProp[json.id] = null;\n    const propsToPopulate = JsonPopulator.getPropsToPopulate(json);\n\n    if (json.hasOwnProperty(\"props\")) {\n      this.populateProps(json[\"props\"], propsToPopulate);\n    }\n  }\n\n  populateProps(props, propsToPopulate) {\n    for (const prop in props) {\n      if (propsToPopulate.includes(prop)) this.populateProp(props, prop);\n    }\n  }\n\n  populateProp(json, prop) {\n    const propValue = json[prop];\n    if (typeof propValue === \"object\") this.populatePropObject(propValue);else this.populatePropValue(json, prop);\n  }\n\n  populatePropObject(propValue) {\n    if (Array.isArray(propValue)) this.loopJsonArray(propValue);else if (JsonPopulator.isComponent(propValue)) this.populateComponent(propValue);else this.loopJson(propValue);\n  }\n\n  loopJsonArray(jsonArray) {\n    jsonArray.forEach(prop => {\n      if (typeof prop === \"object\") this.populatePropObject(prop);\n    });\n  }\n\n  loopJson(json) {\n    for (const prop in json) {\n      if (typeof prop === \"object\") this.populatePropObject(prop);\n    }\n  }\n\n  populatePropValue(json, prop) {\n    if (typeof json[prop] !== 'function') json[prop] = this.data[json[prop]];\n  }\n\n  static getPropsToPopulate(json) {\n    let propsToPopulate = json[\"propsToPopulate\"];\n    json[\"propsToPopulate\"] = [];\n    if (!propsToPopulate) propsToPopulate = [];\n    return propsToPopulate;\n  }\n\n  static isComponent(json) {\n    return json.hasOwnProperty(\"render\");\n  }\n\n}","map":{"version":3,"names":["ReactIOCException","JsonPopulator","constructor","data","state","populatePageStructure","json","populateComponent","stateProp","hasOwnProperty","populateProp","requireRedux","id","propsToPopulate","getPropsToPopulate","populateProps","props","prop","includes","propValue","populatePropObject","populatePropValue","Array","isArray","loopJsonArray","isComponent","loopJson","jsonArray","forEach"],"sources":["C:/Development/Personal/React-IOC/react-ioc/src/utils/JsonPopulator.js"],"sourcesContent":["import ReactIOCException from './ReactIOCException'\r\n\r\nexport default class JsonPopulator {\r\n\r\n  constructor(data){\r\n    this.data = data;\r\n    this.state = {};\r\n  }\r\n\r\n  populatePageStructure(json){\r\n    this.populateComponent(json,state);\r\n  }\r\n\r\n  populateComponent(json,stateProp){\r\n    if(!json.hasOwnProperty(\"render\")) throw new ReactIOCException(\"Missing 'render' attribute!\", \"'render' attribute is missing in json.\");\r\n    this.populateProp(json,\"render\");\r\n    if(json.requireRedux) stateProp[json.id] = null;\r\n    const propsToPopulate = JsonPopulator.getPropsToPopulate(json);\r\n    if(json.hasOwnProperty(\"props\")){\r\n      this.populateProps(json[\"props\"],propsToPopulate)\r\n    }\r\n  }\r\n\r\n  populateProps(props,propsToPopulate){\r\n\r\n    for (const prop in props) {\r\n      if (propsToPopulate.includes(prop)) this.populateProp(props, prop);\r\n    }\r\n  }\r\n\r\n  populateProp(json, prop) {\r\n    const propValue = json[prop];\r\n    if (typeof propValue === \"object\") this.populatePropObject(propValue);\r\n    else this.populatePropValue(json,prop);\r\n  }\r\n\r\n  populatePropObject(propValue){\r\n    if (Array.isArray(propValue)) this.loopJsonArray(propValue);\r\n    else if (JsonPopulator.isComponent(propValue)) this.populateComponent(propValue)\r\n    else this.loopJson(propValue);\r\n  }\r\n\r\n  loopJsonArray(jsonArray) {\r\n    jsonArray.forEach((prop) => {\r\n      if (typeof prop === \"object\")this.populatePropObject(prop);\r\n    });\r\n  }\r\n\r\n  loopJson(json) {\r\n    for (const prop in json) {\r\n      if (typeof prop === \"object\")this.populatePropObject(prop);\r\n    }\r\n  }\r\n\r\n  populatePropValue(json,prop){\r\n    if(typeof json[prop] !== 'function') json[prop] = this.data[json[prop]];\r\n  }\r\n\r\n  static getPropsToPopulate(json){\r\n    let propsToPopulate = json[\"propsToPopulate\"];\r\n    json[\"propsToPopulate\"] = [];\r\n    if(!propsToPopulate) propsToPopulate = [];\r\n    return propsToPopulate;\r\n  }\r\n\r\n  static isComponent(json){\r\n    return json.hasOwnProperty(\"render\");\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}