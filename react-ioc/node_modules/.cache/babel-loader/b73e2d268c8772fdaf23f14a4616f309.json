{"ast":null,"code":"import ReactIOCException from './ReactIOCException';\nexport default class JsonPopulator {\n  constructor(data) {\n    this.data = data;\n  }\n\n  populatePageStructure(json) {\n    const state = {};\n    this.populateComponent(json, state);\n    return state;\n  }\n\n  populateComponent(json, stateProp) {\n    if (!json.hasOwnProperty(\"render\")) throw new ReactIOCException(\"Missing 'render' attribute!\", \"'render' attribute is missing in json.\");\n    this.populateProp(json, \"render\");\n\n    if (json.requireRedux) {\n      stateProp[json.id] = json.initialValue ? json.initialValue : {};\n      stateProp = stateProp[json.id];\n    }\n\n    const propsToPopulate = JsonPopulator.getPropsToPopulate(json);\n    if (json.hasOwnProperty(\"props\")) this.populateProps(json[\"props\"], propsToPopulate, stateProp);\n  }\n\n  populateProps(props, propsToPopulate, stateProp) {\n    for (const prop in props) {\n      if (propsToPopulate.includes(prop)) this.populateProp(props, prop, stateProp);\n    }\n  }\n\n  populateProp(json, prop, stateProp) {\n    const propValue = json[prop];\n    if (typeof propValue === \"object\") this.populatePropObject(propValue, stateProp);else this.populatePropValue(json, prop);\n  }\n\n  populatePropObject(propValue, stateProp) {\n    if (Array.isArray(propValue)) this.loopJsonArray(propValue, stateProp);else if (JsonPopulator.isComponent(propValue)) this.populateComponent(propValue, stateProp);else this.loopJson(propValue, stateProp);\n  }\n\n  loopJsonArray(jsonArray, stateProp) {\n    jsonArray.forEach(prop => {\n      if (typeof prop === \"object\") this.populatePropObject(prop, stateProp);\n    });\n  }\n\n  loopJson(json, stateProp) {\n    for (const prop in json) {\n      if (typeof prop === \"object\") this.populatePropObject(prop, stateProp);\n    }\n  }\n\n  populatePropValue(json, prop) {\n    if (typeof json[prop] !== 'function') json[prop] = this.data[json[prop]];\n  }\n\n  static getPropsToPopulate(json) {\n    let propsToPopulate = json[\"propsToPopulate\"];\n    if (!propsToPopulate) propsToPopulate = [];\n    return propsToPopulate;\n  }\n\n  static isComponent(json) {\n    return json.hasOwnProperty(\"render\");\n  }\n\n}","map":{"version":3,"names":["ReactIOCException","JsonPopulator","constructor","data","populatePageStructure","json","state","populateComponent","stateProp","hasOwnProperty","populateProp","requireRedux","id","initialValue","propsToPopulate","getPropsToPopulate","populateProps","props","prop","includes","propValue","populatePropObject","populatePropValue","Array","isArray","loopJsonArray","isComponent","loopJson","jsonArray","forEach"],"sources":["C:/Development/Personal/React-IOC/react-ioc/src/utils/JsonPopulator.js"],"sourcesContent":["import ReactIOCException from './ReactIOCException'\r\n\r\nexport default class JsonPopulator {\r\n\r\n  constructor(data) {\r\n    this.data = data;\r\n  }\r\n\r\n  populatePageStructure(json) {\r\n    const state = {};\r\n    this.populateComponent(json,state);\r\n    return state;\r\n  }\r\n\r\n  populateComponent(json, stateProp) {\r\n    if (!json.hasOwnProperty(\"render\")) throw new ReactIOCException(\"Missing 'render' attribute!\", \"'render' attribute is missing in json.\");\r\n    this.populateProp(json, \"render\");\r\n    if (json.requireRedux){\r\n      stateProp[json.id] = json.initialValue ? json.initialValue : {};\r\n      stateProp = stateProp[json.id];\r\n    }\r\n    const propsToPopulate = JsonPopulator.getPropsToPopulate(json);\r\n    if (json.hasOwnProperty(\"props\"))\r\n      this.populateProps(json[\"props\"], propsToPopulate, stateProp)\r\n  }\r\n\r\n  populateProps(props, propsToPopulate, stateProp) {\r\n    for (const prop in props) {\r\n      if (propsToPopulate.includes(prop)) this.populateProp(props, prop, stateProp);\r\n    }\r\n  }\r\n\r\n  populateProp(json, prop, stateProp) {\r\n    const propValue = json[prop];\r\n    if (typeof propValue === \"object\") this.populatePropObject(propValue, stateProp);\r\n    else this.populatePropValue(json, prop);\r\n  }\r\n\r\n  populatePropObject(propValue, stateProp) {\r\n    if (Array.isArray(propValue)) this.loopJsonArray(propValue, stateProp);\r\n    else if (JsonPopulator.isComponent(propValue)) this.populateComponent(propValue, stateProp)\r\n    else this.loopJson(propValue,stateProp);\r\n  }\r\n\r\n  loopJsonArray(jsonArray,stateProp) {\r\n    jsonArray.forEach((prop) => {\r\n      if (typeof prop === \"object\") this.populatePropObject(prop,stateProp);\r\n    });\r\n  }\r\n\r\n  loopJson(json,stateProp) {\r\n    for (const prop in json) {\r\n      if (typeof prop === \"object\") this.populatePropObject(prop,stateProp);\r\n    }\r\n  }\r\n\r\n  populatePropValue(json, prop) {\r\n    if (typeof json[prop] !== 'function') json[prop] = this.data[json[prop]];\r\n  }\r\n\r\n  static getPropsToPopulate(json) {\r\n    let propsToPopulate = json[\"propsToPopulate\"];\r\n    if (!propsToPopulate) propsToPopulate = [];\r\n    return propsToPopulate;\r\n  }\r\n\r\n  static isComponent(json) {\r\n    return json.hasOwnProperty(\"render\");\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}